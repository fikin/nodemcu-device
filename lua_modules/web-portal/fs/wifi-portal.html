<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Device Admin</title>
    <link rel="stylesheet" type="text/css" href="wifi-portal.css" />
  </head>

  <body>
    <div id="content">
      <fieldset>
        <h3 class="collapsible">Connect the device to Wi-Fi (wifi-sta)</h3>
        <div class="collapsible-content grid-container">
          <label for="wifiSta_config_ssid" class="grid-item">Wi-Fi Name/SSID:</label>
          <input id="wifiSta_config_ssid" class="cfgValue grid-item" type="text" autocorrect="off" autocapitalize="none" placeholder="" />
          <label for="wifiSta_config_pwd" class="grid-item">Password:</label>
          <input
            id="wifiSta_config_pwd"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder=""
          />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Device settings (wifi)</h3>
        <div class="collapsible-content grid-container">
          <label for="wifiSta_hostname" class="grid-item">Hostname:</label>
          <input
            id="wifiSta_hostname"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            placeholder="i.e. door-lights"
          />
          <label for="wifi_country_country" class="grid-item">Country code<br />(2 chars):</label>
          <input
            id="wifi_country_country"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. AQ"
          />
          <label for="wifiAp_config_ssid" class="grid-item">Device AP SSID:</label>
          <input
            id="wifiAp_config_ssid"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder=""
          />
          <label for="wifiAp_config_pwd" class="grid-item">Device AP password:</label>
          <input
            id="wifiAp_config_pwd"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder=""
          />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Device admin (web-portal)</h3>
        <div class="collapsible-content grid-container">
          <label for="webPortal_realm" class="grid-item">Realm:</label>
          <input id="webPortal_realm" class="cfgValue grid-item" type="text" readonly />
          <label for="webPortal_usr" class="grid-item">Username:</label>
          <input
            id="webPortal_usr"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            placeholder="i.e. admin"
          />
          <label for="webPortal_pwd" class="grid-item">Password:</label>
          <input
            id="webPortal_pwd"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. hard-password"
          />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Wifi Modem (wifi)</h3>
        <div class="collapsible-content grid-container">
          <label for="wifi_maxtxpower" class="grid-item">Max TX Power:</label>
          <input id="wifi_maxtxpower" class="cfgValue grid-item" type="number" min="1" max="255" step="1" />
          <label for="wifi_phymode" class="grid-item">Physical mode:</label>
          <select id="wifi_phymode" class="cfgValue grid-item">
            <option value="1">802.11b</option>
            <option value="2">802.11g</option>
            <option value="3">802.11n</option>
          </select>
          <label for="wifi_country_policy" class="grid-item">Country policy:</label>
          <select id="wifi_country_policy" class="cfgValue grid-item">
            <option value="0">Auto</option>
            <option value="1">Manual</option>
          </select>
          <label for="wifi_country_start#ch" class="grid-item">Start channel:</label>
          <input id="wifi_country_start#ch" class="cfgValue grid-item" type="number" min="1" max="14" step="1" />
          <label for="wifi_country_endt#ch" class="grid-item">Start channel:</label>
          <input id="wifi_country_end#ch" class="cfgValue grid-item" type="number" min="1" max="14" step="1" />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Wifi Station mode (wifi-sta)</h3>
        <div class="collapsible-content grid-container">
          <label for="wifiSta_bssid" class="grid-item">BSSID:</label>
          <input
            id="wifiSta_bssid"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XX:XX:XX:XX"
          />
          <label for="wifiSta_sleepType" class="grid-item">Sleep type:</label>
          <select id="wifiSta_sleepType" class="cfgValue grid-item">
            <option value="0">None</option>
            <option value="1">Light</option>
            <option value="2">Modem</option>
          </select>
          <label for="wifiSta_mac" class="grid-item">MAC address:</label>
          <input
            id="wifiSta_mac"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XX:XX:XX:XX"
          />
          <label for="wifiSta_staticIp_ip" class="grid-item">Static IP address:</label>
          <input
            id="wifiSta_staticIp_ip"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XXX.XXX.XXX.XXX"
          />
          <label for="wifiSta_staticIp_netmask" class="grid-item">Static IP netmask:</label>
          <input
            id="wifiSta_staticIp_netmask"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. 255.255.255.0"
          />
          <label for="wifiSta_staticIp_gateway" class="grid-item">Static IP gateway:</label>
          <input
            id="wifiSta_staticIp_gateway"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XXX.XXX.XXX.0"
          />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Wifi AP mode (wifi-ap)</h3>
        <div class="collapsible-content grid-container">
          <label for="wifiAp_config_auth" class="grid-item">Authentication method:</label>
          <select id="wifiAp_config_auth" class="cfgValue grid-item">
            <option value="0">Open</option>
            <option value="2">WPA PSK</option>
            <option value="3">WPA2 PSK</option>
            <option value="4">WPA WPA2 PSK</option>
          </select>
          <label for="wifiAp_config_channel" class="grid-item">Channel:</label>
          <input id="wifiAp_config_channel" class="cfgValue grid-item" type="number" min="1" max="14" step="1" />
          <label for="wifiAp_config_hidden" class="grid-item">Hidden:</label>
          <select id="wifiAp_config_hidden" class="cfgValue grid-item">
            <option value="true">hidden</option>
            <option value="false">open</option>
          </select>
          <label for="wifiAp_config_beacon" class="grid-item">Beacon:</label>
          <input id="wifiAp_config_beacon" class="cfgValue grid-item" type="number" min="1000" max="60000" step="1" />
          <label for="wifiAp_mac" class="grid-item">MAC address:</label>
          <input
            id="wifiAp_mac"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XX:XX:XX:XX"
          />
          <label for="wifiAp_staticIp_ip" class="grid-item">Static IP address:</label>
          <input
            id="wifiAp_staticIp_ip"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XXX.XXX.XXX.XXX"
          />
          <label for="wifiAp_staticIp_netmask" class="grid-item">Static IP netmask:</label>
          <input
            id="wifiAp_staticIp_netmask"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. 255.255.255.0"
          />
          <label for="wifiAp_staticIp_gateway" class="grid-item">Static IP gateway:</label>
          <input
            id="wifiAp_staticIp_gateway"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XXX.XXX.XXX.0"
          />
          <label for="wifiAp_dhcpConfig_start" class="grid-item">DHCP start address:</label>
          <input
            id="wifiAp_dhcpConfig_start"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. XXX.XXX.XXX.XXX"
          />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Wifi manager (wifi-mgr)</h3>
        <div class="collapsible-content grid-container">
          <label for="wifiMgr_sntpSync" class="grid-item">SNTP sync:</label>
          <select id="wifiMgr_sntpSync" class="cfgValue grid-item">
            <option>true</option>
            <option>false</option>
          </select>
          <label for="wifiMgr_mdnsAdv" class="grid-item">mDNS advertise:</label>
          <select id="wifiMgr_mdnsAdv" class="cfgValue grid-item">
            <option>true</option>
            <option>false</option>
          </select>
          <label for="wifiMgr_staRetryPeriod" class="grid-item">Retry connect to STA (ms):</label>
          <input id="wifiMgr_staRetryPeriod" class="cfgValue grid-item" type="number" min="1" step="1" />
          <label for="wifiMgr_apStartDelay" class="grid-item">Start AP if not connected after (ms):</label>
          <input id="wifiMgr_apStartDelay" class="cfgValue grid-item" type="number" min="1" step="1" />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Log</h3>
        <div class="collapsible-content grid-container">
          <label for="log_level" class="grid-item">Log level:</label>
          <select id="log_level" class="cfgValue grid-item">
            <option value="debug">debug</option>
            <option value="info">info</option>
            <option value="error">error</option>
            <option value="audit">audit</option>
          </select>
          <label for="log_logmodule" class="grid-item">Logging module:</label>
          <select id="log_logmodule" class="cfgValue grid-item">
            <option value="logstdout">logstdout</option>
            <option value="rsyslog">rsyslog</option>
            <option value="logfile">logfile</option>
          </select>

          <label for="logstdout_usecolor" class="grid-item">Use color:</label>
          <select id="logstdout_usecolor" class="cfgValue grid-item">
            <option>true</option>
            <option>false</option>
          </select>

          <label for="logfile_outfile" class="grid-item">Log file:</label>
          <input
            id="logfile_outfile"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. syslog.log"
          />
          <label for="logfile_logrotate" class="grid-item">Log file rotate (bytes):</label>
          <input id="logfile_logrotate" class="cfgValue grid-item" type="number" min="512" max="4086" step="1" />

          <label for="rsyslog_host" class="grid-item">Rsyslog server:</label>
          <input id="rsyslog_host" class="cfgValue grid-item" type="text" autocorrect="off" autocapitalize="none" autocomplete="off" />
          <label for="rsyslog_port" class="grid-item">Rsyslog server port:</label>
          <input id="rsyslog_port" class="cfgValue grid-item" type="number" step="1" />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Telnet</h3>
        <div class="collapsible-content grid-container">
          <label for="telnet_port" class="grid-item">Port:</label>
          <input id="telnet_port" class="cfgValue grid-item" type="number" min="1" max="65535" />
          <label for="telnet_timeoutSec" class="grid-item">Connection timeout (sec):</label>
          <input id="telnet_timeoutSec" class="cfgValue grid-item" type="number" min="1" max="65535" step="1" />
          <label for="telnet_usr" class="grid-item">Username:</label>
          <input id="telnet_usr" class="cfgValue grid-item" type="text" autocorrect="off" autocapitalize="none" placeholder="i.e. admin" />
          <label for="telnet_pwd" class="grid-item">Password:</label>
          <input
            id="telnet_pwd"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. hard-password"
          />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">HTTP Server</h3>
        <div class="collapsible-content grid-container">
          <label for="httpSrv_port" class="grid-item">Port:</label>
          <input id="httpSrv_port" class="cfgValue grid-item" type="number" min="1" max="65535" step="1" />
          <label for="httpSrv_timeoutSec" class="grid-item">Connection timeout (sec):</label>
          <input id="httpSrv_timeoutSec" class="cfgValue grid-item" type="number" min="1" max="65535" step="1" />
          <label for="httpSrv_webModules" class="grid-item">Web modules:</label>
          <select id="httpSrv_webModules" class="cfgValue grid-item" multiple>
            <option>&#160;</option>
            <option>web-portal</option>
            <option>web-ota</option>
            <option>web-ha</option>
          </select>
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Relay Switch (hass)</h3>
        <div class="collapsible-content grid-container">
          <label for="relaySwitch_pin" class="grid-item">Port:</label>
          <input id="relaySwitch_pin" class="cfgValue grid-item" type="number" min="1" max="13" step="1" />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Temp Sensor (hass)</h3>
        <div class="collapsible-content grid-container">
          <label for="tempSensor_periodMs" class="grid-item">Read period (ms):</label>
          <input id="tempSensor_periodMs" class="cfgValue grid-item" type="number" min="1" max="3600000" step="1" />
          <label for="tempSensor_filterSize" class="grid-item">Filter size:</label>
          <input id="tempSensor_filterSize" class="cfgValue grid-item" type="number" min="1" step="1" />
          <label for="tempSensor_moduleName" class="grid-item">Sensor module:</label>
          <select id="tempSensor_moduleName" class="cfgValue grid-item" multiple>
            <option>ds18b20</option>
            <option>adc-ntc</option>
          </select>
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Temp Sensor (ds18b20)</h3>
        <div class="collapsible-content grid-container">
          <label for="ds18b20_pin" class="grid-item">Pin:</label>
          <input id="ds18b20_pin" class="cfgValue grid-item" type="number" min="1" max="13" step="1" />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Temp Sensor (adc NTC)</h3>
        <div class="collapsible-content grid-container">
          <label for="adcNtc_AdcCorr" class="grid-item"
            >Read ADC-values correction factor.<br />
            Use this to long term tune temp calculation.<br />
            Start with 0 (no correction) increase/decrease<br />
            after comparing room temp and sensor results:</label
          >
          <input id="adcNtc_AdcCorr" class="cfgValue grid-item" type="number" step="1" />
          <label for="adcNtc_R1" class="grid-item">Resistor 1 (ohm):</label>
          <input id="adcNtc_R1" class="cfgValue grid-item" type="number" min="1" step="1" />
          <label for="adcNtc_VccA0" class="grid-item">VCC at A0 (V)<br />i.e 3.3 (NodeMCU) or 1 (ESP):</label>
          <input id="adcNtc_VccA0" class="cfgValue grid-item" type="number" step="any" />
          <label for="adcNtc_VccR1" class="grid-item">VCC at R1 (V)<br />likely 3.3 or 5:</label>
          <input id="adcNtc_VccR1" class="cfgValue grid-item" type="number" step="any" />
          <label for="adcNtc_A" class="grid-item">Steinhart-Hart model coefficient A:</label>
          <input id="adcNtc_A" class="cfgValue grid-item" type="number" step="any" />
          <label for="adcNtc_B" class="grid-item">Steinhart-Hart model coefficient B:</label>
          <input id="adcNtc_B" class="cfgValue grid-item" type="number" step="any" />
          <label for="adcNtc_C" class="grid-item">Steinhart-Hart model coefficient C:</label>
          <input id="adcNtc_C" class="cfgValue grid-item" type="number" step="any" />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Thermostat (hass)</h3>
        <div class="collapsible-content grid-container">
          <label for="thermostat_relayPin" class="grid-item">Relay Pin:</label>
          <input id="thermostat_relayPin" class="cfgValue grid-item" type="number" min="1" max="13" step="1" />
          <label for="thermostat_periodMs" class="grid-item">Read period (ms):</label>
          <input id="thermostat_periodMs" class="cfgValue grid-item" type="number" min="1" max="3600000" step="1" />
          <label for="thermostat_data_hvac#mode" class="grid-item">HVAC Mode:</label>
          <select id="thermostat_data_hvac#mode" class="cfgValue grid-item">
            <option>off</option>
            <option>heat</option>
            <option>auto</option>
          </select>
          <label for="thermostat_data_preset#mode" class="grid-item">HVAC Mode:</label>
          <select id="thermostat_data_preset#mode" class="cfgValue grid-item">
            <option>away</option>
            <option>home</option>
            <option>sleep</option>
          </select>
          <label for="thermostat_modes_away_target#temperature#low" class="grid-item">Target temp "away" low (C):</label>
          <input id="thermostat_modes_away_target#temperature#low" class="cfgValue grid-item" type="number" step="any" />
          <label for="thermostat_modes_away_target#temperature#high" class="grid-item">Target temp "away" high (C):</label>
          <input id="thermostat_modes_away_target#temperature#high" class="cfgValue grid-item" type="number" step="any" />
          <label for="thermostat_modes_home_target#temperature#low" class="grid-item">Target temp "home" low (C):</label>
          <input id="thermostat_modes_home_target#temperature#low" class="cfgValue grid-item" type="number" step="any" />
          <label for="thermostat_modes_home_target#temperature#high" class="grid-item">Target temp "home" high (C):</label>
          <input id="thermostat_modes_home_target#temperature#high" class="cfgValue grid-item" type="number" step="any" />
          <label for="thermostat_modes_sleep_target#temperature#low" class="grid-item">Target temp "sleep" low (C):</label>
          <input id="thermostat_modes_sleep_target#temperature#low" class="cfgValue grid-item" type="number" step="any" />
          <label for="thermostat_modes_sleep_target#temperature#high" class="grid-item">Target temp "sleep" high (C):</label>
          <input id="thermostat_modes_sleep_target#temperature#high" class="cfgValue grid-item" type="number" step="any" />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Home Assistant (web-ha)</h3>
        <div class="collapsible-content grid-container">
          <label for="webHa_credentials_realm" class="grid-item">Realm:</label>
          <input id="webHa_credentials_realm" class="cfgValue grid-item" type="text" readonly />
          <label for="webHa_credentials_usr" class="grid-item">Username:</label>
          <input
            id="webHa_credentials_usr"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            placeholder="i.e. admin"
          />
          <label for="webHa_credentials_pwd" class="grid-item">Password:</label>
          <input
            id="webHa_credentials_pwd"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. hard-password"
          />
          <label for="webHa_entities" class="grid-item">Entities:</label>
          <select id="webHa_entities" class="cfgValue grid-item" multiple>
            <option>&#160;</option>
            <option>thermostat</option>
            <option>temp-sensor</option>
            <option>relay-switch</option>
            <option>system-hass</option>
            <option>lights-switch</option>
          </select>
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Web OTA (web-ota)</h3>
        <div class="collapsible-content grid-container">
          <label for="webOta_realm" class="grid-item">Realm:</label>
          <input id="webOta_realm" class="cfgValue grid-item" type="text" readonly />
          <label for="webOta_usr" class="grid-item">Username:</label>
          <input id="webOta_usr" class="cfgValue grid-item" type="text" autocorrect="off" autocapitalize="none" placeholder="i.e. admin" />
          <label for="webOta_pwd" class="grid-item">Password:</label>
          <input
            id="webOta_pwd"
            class="cfgValue grid-item"
            type="text"
            autocorrect="off"
            autocapitalize="none"
            autocomplete="off"
            placeholder="i.e. hard-password"
          />
        </div>
      </fieldset>
      <br />
      <fieldset>
        <h3 class="collapsible">Init sequence (services)</h3>
        <div class="collapsible-content grid-container">
          <label for="initSeq_bootsequence" class="grid-item">Boot sequence:</label>
          <select id="initSeq_bootsequence" class="cfgValue grid-item" multiple>
            <option>&#160;</option>
            <option>user-settings</option>
            <option>wifi-apply-config</option>
            <option>wifi-mgr</option>
            <option>http-srv</option>
            <option>telnet</option>
            <option>temp-sensor-start</option>
            <option>relay-switch-start</option>
            <option>lights-switch-start</option>
            <option>thermostat-start</option>
          </select>
        </div>
      </fieldset>
      <br />
      <button id="save" type="button" class="utility">Save & restart</button>
    </div>
    <script src="wifi-portal.js"></script>
  </body>
</html>
